!function(){function h(a){return document.createElementNS(g,a)}function i(a){return(a<10?"0":"")+a}function k(a){var b=++j+"";return a?a+b:b}function s(b,f){function D(b){var c=j.offset(),g=/^touch/.test(b.type),h=c.left+l,i=c.top+l,k=(g?b.originalEvent.touches[0]:b).pageX-h,p=(g?b.originalEvent.touches[0]:b).pageY-i,r=Math.sqrt(k*k+p*p),s=!1;if(outsideMode=!0,r<n+o&&r>n-o)outsideMode=!0;else{if(!(r>m-o&&r<m+o&&f.hour24&&"hours"===x.currentView))return;outsideMode=!1}b.preventDefault(),a(document.body).addClass("lolliclock-moving"),j.append(x.canvas),x.setHand(k,p,outsideMode),a(document).off(d).on(d,function(a){a.preventDefault();var b=/^touch/.test(a.type),c=(b?a.originalEvent.touches[0]:a).pageX-h,d=(b?a.originalEvent.touches[0]:a).pageY-i;(s||c!==k||d!==p)&&(s=!0,x.setHand(c,d,outsideMode))}),a(document).off(e).on(e,function(b){b.preventDefault();var c=/^touch/.test(b.type),g=(c?b.originalEvent.changedTouches[0]:b).pageX-h,l=(c?b.originalEvent.changedTouches[0]:b).pageY-i;g===k&&l===p&&x.setHand(g,l,outsideMode),"hours"===x.currentView?x.toggleView("minutes",q/2):f.autoclose&&x.done(),j.prepend(E),a(document.body).removeClass("lolliclock-moving"),a(document).off(d),a(document).off(e)})}var g=a(r),j=g.find(".lolliclock-plate"),s=g.find(".lolliclock-dial-hours"),u=g.find(".lolliclock-dial-minutes"),v="INPUT"===b.prop("tagName"),w=v?b:b.find("input"),x=this;if(this.id=k("lolli"),this.element=b,this.options=f,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=v,this.input=w,this.popover=g,this.plate=j,this.hoursView=s,this.minutesView=u,this.header=g.find(".lolliclock-header"),this.spanHours=g.find(".lolliclock-hours"),this.spanMinutes=g.find(".lolliclock-minutes"),this.spanNewTime=g.find(".lolliclock-time-new"),this.spanOldTime=g.find(".lolliclock-time-old"),this.spanAmPm=g.find(".lolliclock-am-pm"),this.amOrPm="PM",this.AmPmButtons=g.find(".lolliclock-ampm-btn"),this.amButton=g.find("#lolliclock-btn-am"),this.pmButton=g.find("#lolliclock-btn-pm"),this.options.hour24&&(this.AmPmButtons.hide(),this.spanAmPm.hide()),!f.autoclose){this.popover.css("height","380px");var y=a('<div class="lolliclock-buttons"></div>').appendTo(g);a('<div class="lolliclock-button">Cancelar</div>').click(a.proxy(this.hide,this)).appendTo(y),a('<div class="lolliclock-button">OK</div>').click(a.proxy(this.done,this)).appendTo(y),this.closeButtons=g.find(".lolliclock-button")}w.on("focus.lolliclock click.lolliclock",a.proxy(this.show,this));var A,B,C,z=a('<div class="lolliclock-tick"></div>');if(f.hour24){for(A=1;A<13;A++)B=z.clone(),C=A/6*Math.PI,B.css({left:l+Math.sin(C)*m-o,top:l-Math.cos(C)*m-o}),B.html(A),s.append(B);for(A=13;A<=24;A++)B=z.clone(),C=A/6*Math.PI,B.css({left:l+Math.sin(C)*n-o,top:l-Math.cos(C)*n-o}),B.html(24===A?"00":A),s.append(B)}else for(A=1;A<13;A++)B=z.clone(),C=A/6*Math.PI,B.css({left:l+Math.sin(C)*n-o,top:l-Math.cos(C)*n-o}),B.html(A),s.append(B);for(A=0;A<60;A+=5)B=z.clone(),C=A/30*Math.PI,B.css({left:l+Math.sin(C)*n-o,top:l-Math.cos(C)*n-o}),B.html(i(A)),u.append(B);j.on(c,D);var E=g.find(".lolliclock-canvas"),F=h("svg");F.setAttribute("class","lolliclock-svg"),F.setAttribute("width",p),F.setAttribute("height",p);var G=h("g");G.setAttribute("transform","translate("+l+","+l+")");var H=h("circle");H.setAttribute("class","lolliclock-bearing"),H.setAttribute("cx",0),H.setAttribute("cy",0),H.setAttribute("r",1.25);var I=h("line");I.setAttribute("x1",0),I.setAttribute("y1",0);var J=h("circle");J.setAttribute("class","lolliclock-canvas-bg"),J.setAttribute("r",o);var K=h("circle");K.setAttribute("class","lolliclock-canvas-fg"),K.setAttribute("r",3.5),G.appendChild(I),G.appendChild(J),G.appendChild(K),G.appendChild(H),F.appendChild(G),E.append(F),this.hand=I,this.bg=J,this.fg=K,this.bearing=H,this.g=G,this.canvas=E,t(this.options.init)}function t(a){a&&"function"===typeof a&&a()}var a=window.jQuery;s.DEFAULTS={startTime:"",autoclose:!1,vibrate:!0,hour24:!1};var b="ontouchstart"in window,c="mousedown"+(b?" touchstart":""),d="mousemove.lolliclock"+(b?" touchmove.lolliclock":""),e="mouseup.lolliclock"+(b?" touchend.lolliclock":""),f=navigator.vibravarte?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,g="http://www.w3.org/2000/svg",j=0,l=84,m=50,n=70,o=12,p=2*l,q=350,r=['<div class="lolliclock-popover">','<div class="lolliclock-header">','<div class="lolliclock-time">','<div class="lolliclock-hours lolliclock-primary-text">','<div class="lolliclock-time-old"></div>','<div class="lolliclock-time-new"></div>',"</div>",'<span class="lolliclock-colon">:</span>','<div class="lolliclock-minutes">','<div class="lolliclock-time-old"></div>','<div class="lolliclock-time-new"></div>',"</div>","</div>",'<span class="lolliclock-am-pm"></span>',"</div>",'<div class="popover-content">','<div class="lolliclock-plate">','<div class="lolliclock-canvas"></div>','<div class="lolliclock-dial lolliclock-dial-hours"></div>','<div class="lolliclock-dial lolliclock-dial-minutes lolliclock-dial-out"></div>',"</div>",'<div class="lolliclock-ampm-block">','<div id="lolliclock-btn-am" class="lolliclock-ampm-btn">','<div class="lolliclock-btn-background"></div>','<div class="lolliclock-btn-text">AM</div>',"</div>",'<div style="flex: 1;"></div>','<div id="lolliclock-btn-pm" class="lolliclock-ampm-btn">','<div class="lolliclock-btn-background"></div>','<div class="lolliclock-btn-text">PM</div>',"</div>","</div>","</div>","</div>"].join("");s.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},s.prototype.changeAmPm=function(b){b&&b===this.amOrPm&&this.options.hour24||(this.amOrPm="AM"===this.amOrPm?"PM":"AM",this.spanAmPm.html(this.amOrPm),a(this.amButton[0].childNodes[0]).toggleClass("lolliclock-active-button-background","AM"===this.amOrPm),a(this.pmButton[0].childNodes[0]).toggleClass("lolliclock-active-button-background","PM"===this.amOrPm),a(this.amButton[0].childNodes[1]).toggleClass("lolliclock-active-button-text","AM"===this.amOrPm),a(this.pmButton[0].childNodes[1]).toggleClass("lolliclock-active-button-text","PM"===this.amOrPm))},s.prototype.locate=function(){var b=this.element,c=this.popover,d=8,e=b.offset().left+(b.outerWidth()-c.width())/2,f=a(window).width()-c.width()-d,g=d,h=a(window).height()+a(window).scrollTop()-d-c.height(),i=d+a(window).scrollTop(),j=b.offset().top,k={};k.top=j<i?i:j>h?h:j,k.left=e<g?g:e>f?f:e,c.css(k),c.show()},s.prototype.show=function(){function c(a){var b=a.split(":");if(2===b.length){var c=+b[0],d=b[1].split(" ");if(2===d.length){var e=d[0];return"PM"===d[1]&&(c+=12),new Date(1970,1,1,c,e)}}return new Date("x")}function d(a){return!isNaN(c(a).getTime())}if(!this.isShown){t(this.options.beforeShow);var b=this;this.isAppended||(a(document.body).append(this.popover),this.isAppended=!0,a(window).on("resize.lolliclock"+this.id,function(){b.isShown&&b.locate()}),a(window).on("scroll.lolliclock",function(){b.isShown&&b.locate()}),this.AmPmButtons.on("click",function(a){b.changeAmPm(a.currentTarget.children[1].innerHTML)}),this.spanMinutes.on("click",function(){b.toggleView("minutes")}),this.spanHours.on("click",function(){b.toggleView("hours")}),this.spanAmPm.on("click",function(){b.changeAmPm()})),b.locate(),this.plate.addClass("animate"),this.header.addClass("animate"),this.popover.addClass("animate"),this.AmPmButtons.addClass("animate"),this.spanNewTime.addClass("animate"),this.spanOldTime.addClass("animate"),!this.options.autoclose&&this.closeButtons.addClass("animate"),this.plate.on("webkitAnimationEnd animationend MSAnimationEnd oanimationend",function(){b.plate.removeClass("animate"),b.header.removeClass("animate"),b.popover.removeClass("animate"),b.AmPmButtons.removeClass("animate"),b.spanNewTime.removeClass("animate"),b.spanOldTime.removeClass("animate"),!b.options.autoclose&&b.closeButtons.removeClass("animate"),b.plate.off("webkitAnimationEnd animationend MSAnimationEnd oanimationend")});var e,f=this.input.prop("value"),g=this.options.startTime,h=this.input.prop("placeholder");e=f&&d(f)?c(f):"now"===g?new Date:g&&d(g)?c(g):h&&d(h)?c(h):new Date,this.options.hour24?this.hours=e.getHours():(this.hours=e.getHours()%12,this.amOrPm=e.getHours()>11?"AM":"PM"),this.minutes=e.getMinutes(),this.changeAmPm(),b.toggleView("minutes"),b.toggleView("hours"),b.isShown=!0,a(document).on("click.lolliclock."+this.id+" focusin.lolliclock."+this.id,function(c){var d=a(c.target);0===d.closest(b.popover).length&&0===d.closest(b.input).length&&b.done()}),a(document).on("keyup.lolliclock."+this.id,function(a){27===a.keyCode&&b.hide()}),t(this.options.afterShow)}},s.prototype.hide=function(){t(this.options.beforeHide);var b=this;b.popover.addClass("animate-out"),b.plate.addClass("animate-out"),b.header.addClass("animate-out"),b.AmPmButtons.addClass("animate-out"),!b.options.autoclose&&b.closeButtons.addClass("animate-out"),this.popover.on("webkitAnimationEnd animationend MSAnimationEnd oanimationend",function(){a(b.spanHours[0].childNodes[0]).html(""),a(b.spanMinutes[0].childNodes[0]).html(""),b.popover.removeClass("animate-out"),b.plate.removeClass("animate-out"),b.header.removeClass("animate-out"),b.AmPmButtons.removeClass("animate-out"),!b.options.autoclose&&b.closeButtons.removeClass("animate-out"),b.popover.off("webkitAnimationEnd animationend MSAnimationEnd oanimationend"),a(document).off("click.lolliclock."+b.id+" focusin.lolliclock."+b.id),a(document).off("keyup.lolliclock."+b.id),b.popover.hide(),t(b.options.afterHide)}),b.isShown=!1},s.prototype.toggleView=function(b,c){var e="hours"===b,f=e?this.hoursView:this.minutesView,g=e?this.minutesView:this.hoursView;if(this.currentView=b,this.spanHours.toggleClass("lolliclock-primary-text",e),this.spanMinutes.toggleClass("lolliclock-primary-text",!e),g.addClass("lolliclock-dial-out"),f.css("visibility","visible").removeClass("lolliclock-dial-out"),this.resetClock(c),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){g.css("visibility","hidden")},q),e)this.plate.off(d);else{var h=this;this.plate.on(d,function(b){var c=h.plate.offset(),d=c.left+l,e=c.top+l,f=b.pageX-d,g=b.pageY-e,i=Math.sqrt(f*f+g*g);i>n-o&&i<n+o?a(document.body).addClass("lolliclock-clickable"):a(document.body).removeClass("lolliclock-clickable")})}},s.prototype.resetClock=function(a){var b=this.currentView,c=!0,d=this[b],e="hours"===b;e?(unit=Math.PI/6,0!==d&&d<=12&&this.options.hour24&&(c=!1)):unit=Math.PI/30;var f=d*unit,g=Math.sin(f)*m,h=-Math.cos(f)*m,i=this;a?(i.canvas.addClass("lolliclock-canvas-out"),setTimeout(function(){i.canvas.removeClass("lolliclock-canvas-out"),i.setHand(g,h,c)},a)):this.setHand(g,h,c)},s.prototype.setHand=function(b,c,d){function l(a){a.on("webkitAnimationEnd animationend MSAnimationEnd oanimationend",function(){p.html(j),p.removeClass("old-down old-up"),q.removeClass("new-down new-up"),p.off("webkitAnimationEnd animationend MSAnimationEnd oanimationend")})}var j,e=Math.atan2(-b,c)+Math.PI,g="hours"===this.currentView,h=Math.PI/(g?6:30);if(d&&this.options.hour24&&g?(j=Math.round(e/h),12===j||0===j?j=0:j+=12):j=Math.round(e/h),e=j*h,g)0!==j||this.options.hour24&&d||(j=12),this.fg.style.visibility="hidden";else{var k=j%5===0;this.fg.style.visibility=k?"hidden":"visible",60===j&&(j=0)}this[this.currentView]!==j&&f&&this.options.vibrate&&(this.vibrateTimer||(navigator[f](10),this.vibrateTimer=setTimeout(a.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=j;var p,q;g?(p=a(this.spanHours[0].childNodes[0]),q=a(this.spanHours[0].childNodes[1]),this.options.hour24&&(j=i(j))):(p=a(this.spanMinutes[0].childNodes[0]),q=a(this.spanMinutes[0].childNodes[1]),j=i(j)),l(p),j<+p.html()?(q.html(p.html()),p.html(j),q.addClass("new-down"),p.addClass("old-down")):(j>+p.html()||!p.html())&&(q.html(j),p.addClass("old-up"),q.addClass("new-up")),this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","lolliclock-canvas-bg");var r=m;d&&(r=n);var s=Math.sin(e)*r,t=-Math.cos(e)*r;this.hand.setAttribute("x2",Math.sin(e)*(r-o)),this.hand.setAttribute("y2",-Math.cos(e)*(r-o)),this.bg.setAttribute("cx",s),this.bg.setAttribute("cy",t),this.fg.setAttribute("cx",s),this.fg.setAttribute("cy",t)},s.prototype.done=function(){t(this.options.beforeDone);var a=this.input.prop("value"),b="";b=this.options.hour24?i(this.hours)+":"+i(this.minutes):this.hours+":"+i(this.minutes)+" "+this.amOrPm,b!==a&&(this.input.prop("value",b),this.input.trigger("input"),this.input.trigger("change")),this.hide()},s.prototype.remove=function(){this.element.removeData("lolliclock"),this.input.off("focus.lolliclock click.lolliclock"),this.isShown&&this.hide(),this.isAppended&&(a(window).off("resize.lolliclock"+this.id),a(window).off("scroll.lolliclock"+this.id),this.popover.remove())},a.fn.lolliclock=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data("lolliclock");if(e)"function"===typeof e[b]&&e[b].apply(e,c);else{var f=a.extend({},s.DEFAULTS,d.data(),"object"==typeof b&&b);d.data("lolliclock",new s(d,f))}})}}();